# OpenTelemetry Configuration for Last9
# Copy this file to .env and fill in your values

# ===========================================
# SERVICE IDENTIFICATION (Required for Last9)
# ===========================================
OTEL_SERVICE_NAME=sanic-event-loop-demo

# Service version - shows in Last9 service catalog
SERVICE_VERSION=1.0.0

# Deployment environment - critical for filtering in Last9
# Options: production, staging, development, etc.
DEPLOYMENT_ENVIRONMENT=development

# Service namespace - logical grouping (e.g., "payments", "user-management")
# SERVICE_NAMESPACE=backend

# ===========================================
# LAST9 OTLP CONFIGURATION
# ===========================================
# Get this from your Last9 dashboard
OTEL_EXPORTER_OTLP_ENDPOINT=https://otlp.last9.io

# Authentication header (Basic auth)
# Format: Authorization=Basic <base64-encoded-credentials>
OTEL_EXPORTER_OTLP_HEADERS=Authorization=Basic YOUR_BASE64_CREDENTIALS_HERE

# Exporter protocol (http/protobuf is more firewall-friendly)
OTEL_EXPORTER_OTLP_PROTOCOL=http/protobuf

# Metric export interval in milliseconds (default: 60000 = 60 seconds / 1 minute)
# Lower values = more frequent exports, higher resolution but more network traffic
# Higher values = less frequent exports, lower resolution but less overhead
# For local testing, you may want 10000 (10 seconds) to see metrics faster
OTEL_METRIC_EXPORT_INTERVAL_MS=60000

# ===========================================
# KUBERNETES ATTRIBUTES (when running in k8s)
# ===========================================
# These are auto-detected when using opentelemetry-resourcedetector-kubernetes
# but you can also set them explicitly via Downward API environment variables:
#
# OTEL_RD_K8S_POD_NAME=my-pod-abc123
# OTEL_RD_K8S_NAMESPACE_NAME=default
# OTEL_RD_K8S_CONTAINER_NAME=app
# OTEL_RD_K8S_DEPLOYMENT_NAME=my-deployment
# OTEL_RD_K8S_NODE_NAME=node-1
# OTEL_RD_K8S_CLUSTER_NAME=my-cluster
#
# Example Kubernetes deployment spec:
# env:
#   - name: OTEL_RD_K8S_POD_NAME
#     valueFrom:
#       fieldRef:
#         fieldPath: metadata.name
#   - name: OTEL_RD_K8S_NAMESPACE_NAME
#     valueFrom:
#       fieldRef:
#         fieldPath: metadata.namespace
#   - name: OTEL_RD_K8S_NODE_NAME
#     valueFrom:
#       fieldRef:
#         fieldPath: spec.nodeName

# ===========================================
# AWS RESOURCE DETECTION (when running in AWS)
# ===========================================
# Install: pip install opentelemetry-sdk-extension-aws
#
# Detectors automatically populate when running in AWS:
# - EC2: cloud.provider, cloud.platform, cloud.region, cloud.account.id,
#        cloud.availability_zone, host.id, host.type, host.image.id
# - ECS: aws.ecs.container.arn, aws.ecs.cluster.arn, aws.ecs.launchtype,
#        aws.ecs.task.arn, aws.ecs.task.family, aws.ecs.task.revision
# - EKS: k8s.cluster.name, cloud.provider=aws, cloud.platform=aws_eks
# - Lambda: faas.name, faas.version, cloud.region, aws.log.group.names
#
# No manual env vars needed - detectors read from AWS metadata services

# ===========================================
# GCP RESOURCE DETECTION (when running in GCP)
# ===========================================
# Install: pip install opentelemetry-resourcedetector-gcp
#
# Detectors automatically populate when running in GCP:
# - GCE: cloud.provider=gcp, cloud.platform=gcp_compute_engine,
#        cloud.account.id, cloud.region, cloud.availability_zone,
#        host.id, host.name, host.type
# - GKE: k8s.cluster.name, cloud.platform=gcp_kubernetes_engine
# - Cloud Run: faas.name, faas.version, cloud.region,
#              gcp.cloud_run.job.execution, gcp.cloud_run.job.task_index
# - Cloud Functions: faas.name, faas.version
#
# No manual env vars needed - detectors read from GCP metadata server

# ===========================================
# ADDITIONAL RESOURCE ATTRIBUTES (Optional)
# ===========================================
# You can add any custom attributes here
# OTEL_RESOURCE_ATTRIBUTES=team=platform,cost_center=engineering

# ===========================================
# SAMPLING CONFIGURATION (Optional)
# ===========================================
# Options: always_on, always_off, traceidratio
OTEL_TRACES_SAMPLER=always_on
# OTEL_TRACES_SAMPLER_ARG=0.1  # For traceidratio sampler

# ===========================================
# APPLICATION SETTINGS
# ===========================================
HOST=0.0.0.0
PORT=8000
DEBUG=true
